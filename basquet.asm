PIC		EQU	20h
TIMER	EQU 10h

	ORG 40
IP_CLK	DW	RUT_CLK

	ORG 44
IP_F10	DW	RUT_F101

	ORG 1000h
SEG  DB 30h
	 DB 29h

	ORG 1500h
MSJ	 DB "TIEMPO!!"
FIN  DB ?

	ORG 3000h
RUT_CLK:PUSH AX
		INC SEG+1
		CMP SEG+1, 3Ah
		JNZ RESET
		MOV SEG+1, 30h
		INC SEG
		CMP SEG, 33h
		JNZ RESET
		MOV SEG, 30h
		MOV BX, OFFSET MSJ
		MOV AL, OFFSET FIN - OFFSET MSJ
		INT 7
		MOV BX, OFFSET SEG
		MOV AL, 2
RESET:	INT 7
		MOV AL, 0
		OUT TIMER, AL
		MOV AL, PIC
		OUT PIC, AL
		POP AX
	IRET

	ORG 3500h
RUT_F101:PUSH AX
		MOV AX, 2F30h
		MOV SEG, AX
		MOV IP_F10, 4000h 
		MOV AL, 0FCh
		OUT PIC+1, AL
		MOV AL, 1
		OUT TIMER, AL
		MOV AL, PIC
		OUT PIC, AL
		POP AX
	IRET

	ORG 4000h
RUT_F102:PUSH AX
		MOV AL, 0FEh
		OUT PIC+1,AL
		MOV IP_F10, 3500h
		MOV AL, PIC
		OUT PIC, AL
		POP AX
	IRET

	ORG 2000h
		CLI
		MOV AL, 0FEh
		OUT PIC+1, AL
		MOV AL, 11
		OUT PIC+4, AL
		MOV AL, 10
		OUT PIC+5, AL
		MOV AL, 1
		OUT TIMER+1, AL
		MOV AL, 2
		MOV BX, OFFSET SEG
		STI
LAZO:	JMP LAZO
END

